{{- $pageContext := . -}}
{{- if .context -}}
  {{- $pageContext = .context -}}
{{- end -}}

<div class="footer-wrapper">
    <div class="footer-container">
        <ul class="footer-links">
            {{- $pages := slice
                (dict "id" "contact" "title" "联系我们")
                (dict "id" "privacy-policy" "title" "隐私政策")
                (dict "id" "terms-of-service" "title" "服务条款")
            -}}

            {{- /* 遍历列表，我们给当前遍历的字典起个名字叫 $page_dict */ -}}
            {{- range $page_dict := $pages }}
                {{- $path := path.Join $pageContext.Language.Lang $page_dict.id -}}

                {{- /* 只用 with 来检查页面是否存在并获取链接，但不使用它的标题 */ -}}
                {{- with site.GetPage $path -}}
                    <li><a href="{{ .RelPermalink }}">{{ $page_dict.title }}</a></li>
                {{- end -}}
            {{- end -}}
            <li>网站统计由 <a href="https://www.51.la/" target="_blank" rel="noopener">51LA</a> 提供</li>
        </ul>

        <div class="footer-copyright">
            {{- $copyright := printf "© %d %s" now.Year site.Title -}}
            <a href="{{ "" | relLangURL }}">{{ $copyright | safeHTML }}</a>
        </div>
    </div>
</div>

{{- /* 51la 数据挂件 */ -}}
{{- if site.Params.la51Id -}}
<div style="max-width: 900px; margin: 1rem auto 2rem; padding: 0 1rem; text-align: center;">
    <script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/{{- site.Params.la51Id | safeJS -}}/quote.js?theme=0&f=12"></script>
</div>
{{- end -}}

{{- /* 推广模块放在最底部 */ -}}
{{- if and (eq $pageContext.Type "docs") (not $pageContext.IsSection) -}}
<div style="max-width: 900px; margin: 2rem auto 3rem; padding: 0 1rem;">
  {{- partial "custom/aivora-promo.html" $pageContext -}}
</div>
{{- end -}}