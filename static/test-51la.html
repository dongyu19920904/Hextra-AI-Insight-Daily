<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>51LA ç»Ÿè®¡ä»£ç æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #ff9900;
            padding-bottom: 10px;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            border-radius: 5px;
            background: #e3f2fd;
        }
        .success {
            background: #c8e6c9;
            color: #2e7d32;
        }
        .error {
            background: #ffcdd2;
            color: #c62828;
        }
        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
        .info {
            margin: 10px 0;
            padding: 10px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
    </style>

    <!-- 51LA ç»Ÿè®¡ä»£ç  - åŒæ­¥åŠ è½½ -->
    <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
    <script>LA.init({id:"3ORsdpexcLjTPigW",ck:"3ORsdpexcLjTPigW",autoTrack:true,hashMode:true})</script>
</head>
<body>
    <div class="test-box">
        <h1>ğŸ§ª 51LA ç»Ÿè®¡ä»£ç æµ‹è¯•é¡µé¢</h1>

        <div class="info">
            <strong>ğŸ“ å½“å‰é¡µé¢ï¼š</strong> <code id="current-url"></code><br>
            <strong>ğŸŒ è®¿é—®åŸŸåï¼š</strong> <code id="hostname"></code><br>
            <strong>â° è®¿é—®æ—¶é—´ï¼š</strong> <code id="visit-time"></code>
        </div>

        <h2>âœ… æ£€æµ‹é¡¹ç›®</h2>

        <div id="sdk-status" class="status">
            <strong>1. SDK åŠ è½½çŠ¶æ€ï¼š</strong> <span id="sdk-result">æ£€æµ‹ä¸­...</span>
        </div>

        <div id="la-object-status" class="status">
            <strong>2. LA å¯¹è±¡çŠ¶æ€ï¼š</strong> <span id="la-result">æ£€æµ‹ä¸­...</span>
        </div>

        <div id="init-status" class="status">
            <strong>3. åˆå§‹åŒ–çŠ¶æ€ï¼š</strong> <span id="init-result">æ£€æµ‹ä¸­...</span>
        </div>

        <div id="referrer-status" class="status">
            <strong>4. Referrer ç­–ç•¥ï¼š</strong> <span id="referrer-result">æ£€æµ‹ä¸­...</span>
        </div>

        <h2>ğŸ“Š 51LA æ•°æ®æŒ‚ä»¶</h2>
        <div style="text-align: center; margin: 20px 0; padding: 20px; background: #f9f9f9; border-radius: 5px;">
            <script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3ORsdpexcLjTPigW/quote.js?theme=0&f=12"></script>
        </div>

        <div class="info">
            <strong>ğŸ’¡ è¯´æ˜ï¼š</strong><br>
            â€¢ å¦‚æœæ‰€æœ‰æ£€æµ‹é¡¹éƒ½æ˜¾ç¤º âœ…ï¼Œè¯´æ˜ä»£ç å·²æ­£ç¡®å®‰è£…<br>
            â€¢ 51la åå°æ£€æµ‹é€šå¸¸éœ€è¦ 10-30 åˆ†é’Ÿ<br>
            â€¢ éœ€è¦è‡³å°‘ 2-3 æ¬¡ç‹¬ç«‹è®¿é—®æ‰èƒ½è§¦å‘æ£€æµ‹<br>
            â€¢ è¯·åœ¨ä¸åŒæµè§ˆå™¨æˆ–éšç§æ¨¡å¼ä¸‹å¤šæ¬¡è®¿é—®æ­¤é¡µé¢
        </div>
    </div>

    <script>
        // æ˜¾ç¤ºå½“å‰é¡µé¢ä¿¡æ¯
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('hostname').textContent = window.location.hostname;
        document.getElementById('visit-time').textContent = new Date().toLocaleString('zh-CN');

        // æ£€æµ‹ SDK åŠ è½½
        setTimeout(function() {
            var sdkScript = document.getElementById('LA_COLLECT');
            var sdkStatus = document.getElementById('sdk-status');
            var sdkResult = document.getElementById('sdk-result');

            if (sdkScript && sdkScript.src) {
                sdkResult.innerHTML = 'âœ… SDK è„šæœ¬å·²åŠ è½½<br><small>æ¥æº: ' + sdkScript.src + '</small>';
                sdkStatus.className = 'status success';
            } else {
                sdkResult.textContent = 'âŒ SDK è„šæœ¬æœªæ‰¾åˆ°';
                sdkStatus.className = 'status error';
            }

            // æ£€æµ‹ LA å¯¹è±¡
            var laStatus = document.getElementById('la-object-status');
            var laResult = document.getElementById('la-result');

            if (typeof LA !== 'undefined') {
                laResult.innerHTML = 'âœ… LA å¯¹è±¡å·²åˆ›å»º<br><small>ç±»å‹: ' + typeof LA + '</small>';
                laStatus.className = 'status success';

                // æ£€æµ‹åˆå§‹åŒ–
                var initStatus = document.getElementById('init-status');
                var initResult = document.getElementById('init-result');

                if (LA.ids && LA.ids.length > 0) {
                    initResult.innerHTML = 'âœ… å·²åˆå§‹åŒ–<br><small>ID: ' + LA.ids[0].id + '</small>';
                    initStatus.className = 'status success';
                } else {
                    initResult.textContent = 'âš ï¸ æœªæ£€æµ‹åˆ°åˆå§‹åŒ– ID';
                    initStatus.className = 'status';
                }
            } else {
                laResult.textContent = 'âŒ LA å¯¹è±¡æœªåˆ›å»º';
                laStatus.className = 'status error';

                document.getElementById('init-result').textContent = 'â­ï¸ è·³è¿‡ï¼ˆLA å¯¹è±¡ä¸å­˜åœ¨ï¼‰';
            }

            // æ£€æµ‹ Referrer ç­–ç•¥
            var referrerStatus = document.getElementById('referrer-status');
            var referrerResult = document.getElementById('referrer-result');
            var referrerMeta = document.querySelector('meta[name="referrer"]');

            if (referrerMeta) {
                var policy = referrerMeta.getAttribute('content');
                if (policy === 'no-referrer') {
                    referrerResult.innerHTML = 'âŒ ç­–ç•¥ä¸º no-referrerï¼ˆä¼šé˜»æ­¢ 51la æ£€æµ‹ï¼‰<br><small>å»ºè®®æ”¹ä¸º: strict-origin-when-cross-origin</small>';
                    referrerStatus.className = 'status error';
                } else {
                    referrerResult.innerHTML = 'âœ… ç­–ç•¥æ­£å¸¸<br><small>å½“å‰ç­–ç•¥: ' + policy + '</small>';
                    referrerStatus.className = 'status success';
                }
            } else {
                referrerResult.textContent = 'âœ… æœªè®¾ç½® referrer ç­–ç•¥ï¼ˆä½¿ç”¨æµè§ˆå™¨é»˜è®¤ï¼‰';
                referrerStatus.className = 'status success';
            }
        }, 2000);
    </script>
</body>
</html>
